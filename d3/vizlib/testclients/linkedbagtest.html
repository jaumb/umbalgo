<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>D3 Test</title>
    <script type="text/javascript" src="../d3.v3.js"></script>
    <script type="text/javascript" src="../common.js"></script>
    <script type="text/javascript" src="../factories/element_factory.js">
    </script>
    <script type="text/javascript" src="../factories/ll_factory.js"></script>
    <script type="text/javascript" src="../algorithms/linkedbag.js"></script>
    <script type="text/javascript" src="../vizlib.js"></script>
    <script type="text/javascript" src="../redraw.js"></script>
  </head>
  <body>
    <div class="chart-container" style="max-width: 1000px;"></div>
    <script type="text/javascript">
      var svgW = window.innerWidth;
      var svgH = window.innerHeight;

      d3.select(".chart-container")
        .append("svg")
        .attr("width", svgW)
        .attr("height", svgH)
        .attr('id','svg_canvas');
      redraw.initialize();

      // example of a client using the insertion visualization
      var dur = 10000;

      var l = [], n = [];
      for (var i = 1; i <= 5; i++) {
        l.push(i);
      }
      d3.shuffle(l);
      for (i = 1; i <= 5; i++) {
        if (i < 5) {
          n.push({id: i,
                  val: l[i-1],
                  nextID:i + 1})
        } else {
          n.push({id: i,
                  val: l[i-1],
                  nextID:'null'})
        }

      }

      var viz = vizlib.get_linkedbag(n, svgW, svgH);
      redraw.draw(viz, dur); // draw initial canvas

      redraw.addOpsAndDraw(viz, 1000,
                           viz.setFill([1,3,5], colors.FINISHED),
                           viz.setFirstFill(colors.ACTIVE));

      redraw.addOpsAndDraw(viz, 3000,
                          viz.showOldFirst());

      redraw.addOpsAndDraw(viz, 3000,
                          viz.shiftRight());

    </script>
  </body>
</html>
