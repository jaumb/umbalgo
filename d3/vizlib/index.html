<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>D3 Test</title>
    <script type="text/javascript" src="./d3.v3.js"></script>
    <script type="text/javascript" src="./common.js"></script>
    <script type="text/javascript" src="./element_factory.js"></script>
  </head>
  <body>
    <div class="chart-container" style="max-width: 1000px;"></div>
    <script type="text/javascript">
      var svgW = window.innerWidth;
      var svgH = window.innerHeight;
      var size = svgW / 12;

      var elems = [];
      for (var i = 0; i < 10; i++) {
        elems.push(element_factory.rect());
        elems[i].pos.x = size + size * i;
        elems[i].pos.y = 100;
        elems[i].width = size;
        elems[i].height = size;
        if (i % 2 === 0) {
          elems[i].fill = color_codes.ACTIVE;
        }
        else {
          elems[i].fill = color_codes.COMPARE;
        }
      }


      var svgW = window.innerWidth;
      var svgH = window.innerHeight;

      d3.select(".chart-container")
        .append("svg")
        .attr("width", svgW)
        .attr("height", svgH)
        .attr('id','svg_canvas');

      d3.select("#svg_canvas")
        .append('g')
        .attr('id','g_arr_elems');

      d3.select("#g_arr_elems")
        .selectAll('rect')
        .data(elems)
        .enter()
        .append('rect')
        .attr('width', function(d) { return d.width; })
        .attr('height', function(d) { return d.height; })
        .attr('x', function(d) { return d.pos.x; })
        .attr('y', function(d) { return d.pos.y; })
        .attr('fill', function(d) { return d.fill; });

      for (i = 0; i < 10; i++) {
        console.log("e" + i + "'s id: " + elems[i].id);
      }

    </script>
  </body>
</html>
